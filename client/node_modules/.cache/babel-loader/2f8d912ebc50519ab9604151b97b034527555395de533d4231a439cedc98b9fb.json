{"ast":null,"code":"import _objectSpread from \"/workspace/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _t from \"@monaco-editor/loader\";\nimport { memo as Te } from \"react\";\nimport ke, { useState as re, useRef as S, useCallback as oe, useEffect as ne } from \"react\";\nimport Se from \"@monaco-editor/loader\";\nimport { memo as ye } from \"react\";\nimport K from \"react\";\nvar le = {\n    wrapper: {\n      display: \"flex\",\n      position: \"relative\",\n      textAlign: \"initial\"\n    },\n    fullWidth: {\n      width: \"100%\"\n    },\n    hide: {\n      display: \"none\"\n    }\n  },\n  v = le;\nimport me from \"react\";\nvar ae = {\n    container: {\n      display: \"flex\",\n      height: \"100%\",\n      width: \"100%\",\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    }\n  },\n  Y = ae;\nfunction Me(_ref) {\n  let {\n    children: e\n  } = _ref;\n  return me.createElement(\"div\", {\n    style: Y.container\n  }, e);\n}\nvar Z = Me;\nvar $ = Z;\nfunction Ee(_ref2) {\n  let {\n    width: e,\n    height: r,\n    isEditorReady: n,\n    loading: t,\n    _ref: a,\n    className: m,\n    wrapperProps: E\n  } = _ref2;\n  return K.createElement(\"section\", _objectSpread({\n    style: _objectSpread(_objectSpread({}, v.wrapper), {}, {\n      width: e,\n      height: r\n    })\n  }, E), !n && K.createElement($, null, t), K.createElement(\"div\", {\n    ref: a,\n    style: _objectSpread(_objectSpread({}, v.fullWidth), !n && v.hide),\n    className: m\n  }));\n}\nvar ee = Ee;\nvar H = ye(ee);\nimport { useEffect as xe } from \"react\";\nfunction Ce(e) {\n  xe(e, []);\n}\nvar k = Ce;\nimport { useEffect as ge, useRef as Re } from \"react\";\nfunction he(e, r) {\n  let n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;\n  let t = Re(!0);\n  ge(t.current || !n ? () => {\n    t.current = !1;\n  } : e, r);\n}\nvar l = he;\nfunction D() {}\nfunction h(e, r, n, t) {\n  return De(e, t) || be(e, r, n, t);\n}\nfunction De(e, r) {\n  return e.editor.getModel(te(e, r));\n}\nfunction be(e, r, n, t) {\n  return e.editor.createModel(r, n, t ? te(e, t) : void 0);\n}\nfunction te(e, r) {\n  return e.Uri.parse(r);\n}\nfunction Oe(_ref3) {\n  let {\n    original: e,\n    modified: r,\n    language: n,\n    originalLanguage: t,\n    modifiedLanguage: a,\n    originalModelPath: m,\n    modifiedModelPath: E,\n    keepCurrentOriginalModel: g = !1,\n    keepCurrentModifiedModel: N = !1,\n    theme: x = \"light\",\n    loading: P = \"Loading...\",\n    options: y = {},\n    height: V = \"100%\",\n    width: z = \"100%\",\n    className: F,\n    wrapperProps: j = {},\n    beforeMount: A = D,\n    onMount: q = D\n  } = _ref3;\n  let [M, O] = re(!1),\n    [T, s] = re(!0),\n    u = S(null),\n    c = S(null),\n    w = S(null),\n    d = S(q),\n    o = S(A),\n    b = S(!1);\n  k(() => {\n    let i = Se.init();\n    return i.then(f => (c.current = f) && s(!1)).catch(f => (f === null || f === void 0 ? void 0 : f.type) !== \"cancelation\" && console.error(\"Monaco initialization: error:\", f)), () => u.current ? I() : i.cancel();\n  }), l(() => {\n    if (u.current && c.current) {\n      let i = u.current.getOriginalEditor(),\n        f = h(c.current, e || \"\", t || n || \"text\", m || \"\");\n      f !== i.getModel() && i.setModel(f);\n    }\n  }, [m], M), l(() => {\n    if (u.current && c.current) {\n      let i = u.current.getModifiedEditor(),\n        f = h(c.current, r || \"\", a || n || \"text\", E || \"\");\n      f !== i.getModel() && i.setModel(f);\n    }\n  }, [E], M), l(() => {\n    let i = u.current.getModifiedEditor();\n    i.getOption(c.current.editor.EditorOption.readOnly) ? i.setValue(r || \"\") : r !== i.getValue() && (i.executeEdits(\"\", [{\n      range: i.getModel().getFullModelRange(),\n      text: r || \"\",\n      forceMoveMarkers: !0\n    }]), i.pushUndoStop());\n  }, [r], M), l(() => {\n    var _u$current;\n    (_u$current = u.current) === null || _u$current === void 0 || (_u$current = _u$current.getModel()) === null || _u$current === void 0 || _u$current.original.setValue(e || \"\");\n  }, [e], M), l(() => {\n    let {\n      original: i,\n      modified: f\n    } = u.current.getModel();\n    c.current.editor.setModelLanguage(i, t || n || \"text\"), c.current.editor.setModelLanguage(f, a || n || \"text\");\n  }, [n, t, a], M), l(() => {\n    var _c$current;\n    (_c$current = c.current) === null || _c$current === void 0 || _c$current.editor.setTheme(x);\n  }, [x], M), l(() => {\n    var _u$current2;\n    (_u$current2 = u.current) === null || _u$current2 === void 0 || _u$current2.updateOptions(y);\n  }, [y], M);\n  let L = oe(() => {\n      var _u$current3;\n      if (!c.current) return;\n      o.current(c.current);\n      let i = h(c.current, e || \"\", t || n || \"text\", m || \"\"),\n        f = h(c.current, r || \"\", a || n || \"text\", E || \"\");\n      (_u$current3 = u.current) === null || _u$current3 === void 0 || _u$current3.setModel({\n        original: i,\n        modified: f\n      });\n    }, [n, r, a, e, t, m, E]),\n    U = oe(() => {\n      var _c$current2;\n      !b.current && w.current && (u.current = c.current.editor.createDiffEditor(w.current, _objectSpread({\n        automaticLayout: !0\n      }, y)), L(), (_c$current2 = c.current) !== null && _c$current2 !== void 0 && _c$current2.editor.setTheme(x), O(!0), b.current = !0);\n    }, [y, x, L]);\n  ne(() => {\n    M && d.current(u.current, c.current);\n  }, [M]), ne(() => {\n    !T && !M && U();\n  }, [T, M, U]);\n  function I() {\n    var _u$current4, _i$original, _i$modified, _u$current5;\n    let i = (_u$current4 = u.current) === null || _u$current4 === void 0 ? void 0 : _u$current4.getModel();\n    g || i !== null && i !== void 0 && (_i$original = i.original) !== null && _i$original !== void 0 && _i$original.dispose(), N || i !== null && i !== void 0 && (_i$modified = i.modified) !== null && _i$modified !== void 0 && _i$modified.dispose(), (_u$current5 = u.current) === null || _u$current5 === void 0 ? void 0 : _u$current5.dispose();\n  }\n  return ke.createElement(H, {\n    width: z,\n    height: V,\n    isEditorReady: M,\n    loading: P,\n    _ref: w,\n    className: F,\n    wrapperProps: j\n  });\n}\nvar ie = Oe;\nvar we = Te(ie);\nimport { useState as Ie } from \"react\";\nimport ce from \"@monaco-editor/loader\";\nfunction Pe() {\n  let [e, r] = Ie(ce.__getMonacoInstance());\n  return k(() => {\n    let n;\n    return e || (n = ce.init(), n.then(t => {\n      r(t);\n    })), () => {\n      var _n;\n      return (_n = n) === null || _n === void 0 ? void 0 : _n.cancel();\n    };\n  }), e;\n}\nvar Le = Pe;\nimport { memo as ze } from \"react\";\nimport We, { useState as ue, useEffect as W, useRef as C, useCallback as _e } from \"react\";\nimport Ne from \"@monaco-editor/loader\";\nimport { useEffect as Ue, useRef as ve } from \"react\";\nfunction He(e) {\n  let r = ve();\n  return Ue(() => {\n    r.current = e;\n  }, [e]), r.current;\n}\nvar se = He;\nvar _ = new Map();\nfunction Ve(_ref4) {\n  let {\n    defaultValue: e,\n    defaultLanguage: r,\n    defaultPath: n,\n    value: t,\n    language: a,\n    path: m,\n    theme: E = \"light\",\n    line: g,\n    loading: N = \"Loading...\",\n    options: x = {},\n    overrideServices: P = {},\n    saveViewState: y = !0,\n    keepCurrentModel: V = !1,\n    width: z = \"100%\",\n    height: F = \"100%\",\n    className: j,\n    wrapperProps: A = {},\n    beforeMount: q = D,\n    onMount: M = D,\n    onChange: O,\n    onValidate: T = D\n  } = _ref4;\n  let [s, u] = ue(!1),\n    [c, w] = ue(!0),\n    d = C(null),\n    o = C(null),\n    b = C(null),\n    L = C(M),\n    U = C(q),\n    I = C(),\n    i = C(t),\n    f = se(m),\n    Q = C(!1),\n    B = C(!1);\n  k(() => {\n    let p = Ne.init();\n    return p.then(R => (d.current = R) && w(!1)).catch(R => (R === null || R === void 0 ? void 0 : R.type) !== \"cancelation\" && console.error(\"Monaco initialization: error:\", R)), () => o.current ? pe() : p.cancel();\n  }), l(() => {\n    var _o$current, _o$current2, _o$current3, _o$current4;\n    let p = h(d.current, e || t || \"\", r || a || \"\", m || n || \"\");\n    p !== ((_o$current = o.current) === null || _o$current === void 0 ? void 0 : _o$current.getModel()) && (y && _.set(f, (_o$current2 = o.current) === null || _o$current2 === void 0 ? void 0 : _o$current2.saveViewState()), (_o$current3 = o.current) !== null && _o$current3 !== void 0 && _o$current3.setModel(p), y && ((_o$current4 = o.current) === null || _o$current4 === void 0 ? void 0 : _o$current4.restoreViewState(_.get(m))));\n  }, [m], s), l(() => {\n    var _o$current5;\n    (_o$current5 = o.current) === null || _o$current5 === void 0 || _o$current5.updateOptions(x);\n  }, [x], s), l(() => {\n    !o.current || t === void 0 || (o.current.getOption(d.current.editor.EditorOption.readOnly) ? o.current.setValue(t) : t !== o.current.getValue() && (B.current = !0, o.current.executeEdits(\"\", [{\n      range: o.current.getModel().getFullModelRange(),\n      text: t,\n      forceMoveMarkers: !0\n    }]), o.current.pushUndoStop(), B.current = !1));\n  }, [t], s), l(() => {\n    var _o$current6, _d$current;\n    let p = (_o$current6 = o.current) === null || _o$current6 === void 0 ? void 0 : _o$current6.getModel();\n    p && a && ((_d$current = d.current) === null || _d$current === void 0 ? void 0 : _d$current.editor.setModelLanguage(p, a));\n  }, [a], s), l(() => {\n    var _o$current7;\n    g !== void 0 && ((_o$current7 = o.current) === null || _o$current7 === void 0 ? void 0 : _o$current7.revealLine(g));\n  }, [g], s), l(() => {\n    var _d$current2;\n    (_d$current2 = d.current) === null || _d$current2 === void 0 || _d$current2.editor.setTheme(E);\n  }, [E], s);\n  let X = _e(() => {\n    if (!(!b.current || !d.current) && !Q.current) {\n      var _d$current3;\n      U.current(d.current);\n      let p = m || n,\n        R = h(d.current, t || e || \"\", r || a || \"\", p || \"\");\n      o.current = (_d$current3 = d.current) === null || _d$current3 === void 0 ? void 0 : _d$current3.editor.create(b.current, _objectSpread({\n        model: R,\n        automaticLayout: !0\n      }, x), P), y && o.current.restoreViewState(_.get(p)), d.current.editor.setTheme(E), g !== void 0 && o.current.revealLine(g), u(!0), Q.current = !0;\n    }\n  }, [e, r, n, t, a, m, x, P, y, E, g]);\n  W(() => {\n    s && L.current(o.current, d.current);\n  }, [s]), W(() => {\n    !c && !s && X();\n  }, [c, s, X]), i.current = t, W(() => {\n    var _I$current, _o$current8;\n    s && O && ((_I$current = I.current) !== null && _I$current !== void 0 && _I$current.dispose(), I.current = (_o$current8 = o.current) === null || _o$current8 === void 0 ? void 0 : _o$current8.onDidChangeModelContent(p => {\n      B.current || O(o.current.getValue(), p);\n    }));\n  }, [s, O]), W(() => {\n    if (s) {\n      let p = d.current.editor.onDidChangeMarkers(R => {\n        var _o$current$getModel;\n        let G = (_o$current$getModel = o.current.getModel()) === null || _o$current$getModel === void 0 ? void 0 : _o$current$getModel.uri;\n        if (G && R.find(J => J.path === G.path)) {\n          let J = d.current.editor.getModelMarkers({\n            resource: G\n          });\n          T === null || T === void 0 || T(J);\n        }\n      });\n      return () => {\n        p === null || p === void 0 || p.dispose();\n      };\n    }\n    return () => {};\n  }, [s, T]);\n  function pe() {\n    var _I$current2, _o$current$getModel2;\n    (_I$current2 = I.current) !== null && _I$current2 !== void 0 && _I$current2.dispose(), V ? y && _.set(m, o.current.saveViewState()) : (_o$current$getModel2 = o.current.getModel()) === null || _o$current$getModel2 === void 0 ? void 0 : _o$current$getModel2.dispose(), o.current.dispose();\n  }\n  return We.createElement(H, {\n    width: z,\n    height: F,\n    isEditorReady: s,\n    loading: N,\n    _ref: b,\n    className: j,\n    wrapperProps: A\n  });\n}\nvar fe = Ve;\nvar de = ze(fe);\nvar Ft = de;\nexport { we as DiffEditor, de as Editor, Ft as default, _t as loader, Le as useMonaco };\n//# sourceMappingURL=index.mjs.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}