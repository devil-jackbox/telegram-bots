{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Link}from'react-router-dom';import{ArrowLeft,RefreshCw,Trash2,AlertTriangle,Clock,Info}from'lucide-react';import{useBots}from'../contexts/BotContext';import{useSocket}from'../contexts/SocketContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BotErrors=()=>{const{botId}=useParams();const{bots,getBotErrors}=useBots();const{joinBotRoom,leaveBotRoom}=useSocket();const[errors,setErrors]=useState([]);const[loading,setLoading]=useState(true);const[autoRefresh,setAutoRefresh]=useState(true);const bot=bots.find(b=>b.id===botId);useEffect(()=>{if(botId){joinBotRoom(botId);loadErrors();}return()=>{if(botId){leaveBotRoom(botId);}};},[botId]);const loadErrors=async()=>{try{setLoading(true);const errorsData=await getBotErrors(botId,{limit:100});setErrors(errorsData);}catch(error){console.error('Failed to load errors:',error);}finally{setLoading(false);}};const clearErrors=()=>{if(window.confirm('Are you sure you want to clear all errors?')){setErrors([]);}};if(!bot){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-2\",children:\"Bot Not Found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"The bot you're looking for doesn't exist.\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"btn-primary\",children:\"Back to Dashboard\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(Link,{to:\"/bot/\".concat(botId),className:\"text-primary-600 hover:text-primary-700\",children:/*#__PURE__*/_jsx(ArrowLeft,{size:20})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Bot Errors\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:bot.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:loadErrors,disabled:loading,className:\"btn-secondary\",children:[/*#__PURE__*/_jsx(RefreshCw,{size:16,className:loading?'animate-spin':''}),\"Refresh\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:clearErrors,className:\"btn-danger\",children:[/*#__PURE__*/_jsx(Trash2,{size:16}),\"Clear Errors\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(AlertTriangle,{size:16,className:\"text-red-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Error Monitoring\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"autoRefresh\",checked:autoRefresh,onChange:e=>setAutoRefresh(e.target.checked),className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"autoRefresh\",className:\"text-sm text-gray-700\",children:\"Auto-refresh\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-medium text-gray-900\",children:[\"Errors (\",errors.length,\")\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500\",children:[errors.length,\" total errors\"]})]})}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600\",children:\"Loading errors...\"})]}):errors.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 text-center\",children:[/*#__PURE__*/_jsx(AlertTriangle,{size:48,className:\"mx-auto text-green-500 mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No errors found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Great! Your bot is running without any errors.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"max-h-96 overflow-y-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"divide-y divide-gray-200\",children:errors.map((error,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"p-4 hover:bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 mt-1\",children:/*#__PURE__*/_jsx(AlertTriangle,{size:16,className:\"text-red-500\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"badge-error\",children:\"ERROR\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:new Date(error.timestamp).toLocaleString()})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900 font-mono whitespace-pre-wrap\",children:error.error})})]})]})},index))})})]})]});};export default BotErrors;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}